<main>
   <div class="page">
      <rya-search-bar
         class="page__search-bar"
         [color]="'secondary'"
         (click)="shared.toggleSearchModal()"
      />
      <rya-header class="page__header" [content]="content.header.main" [variant]="'main'" />
      <rya-tab
         class="page__tab"
         [tabs]="content.tab"
         (currentTabEmitter)="currentTabSetter($event)"
      />

      <!-- TODO: REFACTOR THIS, move some logic to the +state / data-access -->
      <ng-container [ngSwitch]="config.currentTabIndex">
         <section *ngSwitchCase="0" class="page__section page__arrivals">
            <ng-container *ngIf="{ loading: pageLoaded$ | async } as loaded">
               <ng-container *ngFor="let train of trainData$ | async; let i = index">
                  <rya-station-card
                     *ngIf="i < config.maxStationArrivals"
                     class="page__arrivals__card"
                     [content]="train"
                     [feedback]="content.feedback['emptyArrivals']"
                     [maxQuantiy]="config.maxRailArrivals"
                     infoFlag="arrival"
                  />
               </ng-container>

               <div *ngIf="loaded.loading" class="page__arrivals">
                  <lib-loading-skeleton />
                  <lib-loading-skeleton />
                  <lib-loading-skeleton />
                  <lib-loading-skeleton />
               </div>
            </ng-container>
         </section>
         <section *ngSwitchCase="1" class="page__section">
            <rya-station-card
               class="page__arrivals__card"
               [feedback]="content.feedback['emptySaved']"
               [maxQuantiy]="config.maxRailArrivals"
               infoFlag="feedback"
            />
         </section>
      </ng-container>

      <!-- TODO: REFACTOR THIS, USE @FOR to iterate the rya-tile -->
      <section class="page__section page__explore">
         <rya-header [content]="content.header.explore" [variant]="'main'" />
         <div class="page__explore__actions">
            <rya-tile class="page__explore__actions__tile" spacing="xs">
               <rya-icon category="stations" name="parking-area" />
               <p>Parking</p>
            </rya-tile>
            <rya-tile class="page__explore__actions__tile" spacing="xs">
               <rya-icon category="stations" name="card" />
               <p>Breeze Card</p>
            </rya-tile>
            <rya-tile class="page__explore__actions__tile" spacing="xs">
               <rya-icon category="stations" name="mini-map" />
               <p>Rail Map</p>
            </rya-tile>
            <rya-tile class="page__explore__actions__tile" spacing="xs">
               <rya-icon category="stations" name="schedule" />
               <p>Schedules</p>
            </rya-tile>
         </div>
      </section>
      <rya-footer />
   </div>
   <!-- TODO: add this page when map is implemented -->
   <!-- <aside class="page__map">
      <div class="page__map__wrapper">
         <ng-container *ngIf="{ loading: pageLoaded$ | async } as loaded">
            <rya-icon
               [class.icon--ripple]="loaded.loading"
               [category]="'stations'"
               [name]="'map'"
            />
            <p *ngIf="!loaded.loading">Map feature is currently unavailable.</p>
         </ng-container>
      </div>
   </aside> -->
</main>
