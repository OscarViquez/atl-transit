<div class="train-arrivals-page">
   <ng-container *ngIf="{ loading: pageLoaded$ | async } as loaded">
      <!-- If content has completed loading -->
      <ng-container *ngIf="!loaded.loading">
         <section class="hero-wrapper">
            <lib-hero [content]="staticContentHeader"></lib-hero>
         </section>
         <div class="tab">
            <div class="tab-wrapper">
               <lib-tab [content]="staticContentTab" (currentTabEmitter)="currentTabSetter($event)"></lib-tab>
            </div>
         </div>
         <section class="train-arrivals" *ngIf="view.currentTabIndex === 0">
            <div class="train-arrivals-wrapper">
               <ng-container *ngFor="let train of trainData$ | async; let i = index">
                  <div *ngIf="i < maxStationArrivals">
                     <lib-station-card [content]="train" [maxQuantiy]="maxRailArrivals"></lib-station-card>
                  </div>
               </ng-container>
            </div>
         </section>
         <section class="train-arrivals" *ngIf="view.currentTabIndex === 1">
            <div class="train-arrivals-wrapper">
               <!-- TODO: Add view change when there are saved stations in storage -->
               <lib-station-error-message [content]="savedErrorMessage"></lib-station-error-message>
            </div>
         </section>
      </ng-container>

      <!-- If content is still loading... -->
      <ng-container *ngIf="loaded.loading">
         <section class="hero-wrapper">
            <lib-loading-skeleton [loadingItem]="'hero'"></lib-loading-skeleton>
         </section>

         <div class="tab">
            <div class="tab-wrapper">
               <lib-loading-skeleton [loadingItem]="'tab'"></lib-loading-skeleton>
            </div>
         </div>

         <section class="train-arrivals">
            <div class="train-arrivals-wrapper">
               <lib-loading-skeleton [loadingItem]="'train-card'"></lib-loading-skeleton>
            </div>
         </section>
      </ng-container>
   </ng-container>
</div>
